import{c as y,o as q,i as u,m as F,a as w,b as i,e as P,L as R,t as C}from"./index.2dbd5e2f.js";const j="_Container_pyl24_1",D="_Content_pyl24_16",T="_link_pyl24_52",U="_error_pyl24_61",l={Container:j,Content:D,link:T,error:U},J=C('<div><form><div><header>Sign Up</header><div><label>Email</label><input type="email" name="email" required class="form-control mt-1" placeholder="Enter email"></div><div class="mt-3"><label>Password</label><input type="password" name="password_retype" required class="form-control mt-1" placeholder="Enter password"></div><div class="mt-3"><label>Repeat your password</label><input type="password" name="password" required class="form-control mt-1" placeholder="Enter password"></div><div class="mt-3"><button type="submit" class="btn">Submit</button></div><div><label>Aleady have an account?</label></div></div></form></div>'),K=C("<div></div>");function z(){const[_,S]=y({email:"",password:"",password_retype:""}),[p,s]=y({state:!1,msg:""});q(()=>{document.title="NOSOK | Sign up"});function o(r){S({..._(),[r.target.name]:r.target.value})}function E(r){r.preventDefault();const n=_();if(n.password!==n.password_retype){console.log("error"),s({msg:"Passwords do not match!",state:!0});return}fetch("/auth/signup",{method:"POST",body:JSON.stringify({email:n.email,password:n.password}),headers:{"Content-Type":"application/json"}}).then(t=>{if(t.redirected)window.location.href=t.url;else{if(t.status!==200){s({msg:"An error occured, please try again later.",state:!0});return}t.json().then(d=>{if(d.message==="already exists"){s({msg:"A user with this email already exists!",state:!0});return}s({msg:"An error occured, please try again later.",state:!0})})}}).catch(t=>s({msg:"An error occured, please try again later.",state:!0}))}return(()=>{const r=J.cloneNode(!0),n=r.firstChild,t=n.firstChild,d=t.firstChild,c=d.nextSibling,x=c.firstChild,L=x.nextSibling,v=c.nextSibling,k=v.firstChild,A=k.nextSibling,f=v.nextSibling,N=f.firstChild,g=N.nextSibling,O=f.nextSibling,m=O.nextSibling;return m.firstChild,n.addEventListener("submit",E),u(t,(()=>{const e=F(()=>!!p().state,!0);return()=>e()?(()=>{const a=K.cloneNode(!0);return u(a,()=>p().msg),w(()=>i(a,l.error)),a})():""})(),c),L.addEventListener("change",o),A.addEventListener("change",o),g.addEventListener("change",o),g.addEventListener("paste",e=>e.preventDefault()),u(m,P(R,{href:"/login",children:"Login"}),null),w(e=>{const a=l.Container,h=l.Form,$=l.Content,b=`${l.link} mt-3`;return a!==e._v$&&i(r,e._v$=a),h!==e._v$2&&i(n,e._v$2=h),$!==e._v$3&&i(t,e._v$3=$),b!==e._v$4&&i(m,e._v$4=b),e},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),r})()}export{z as default};
